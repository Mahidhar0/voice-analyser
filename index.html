<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice Analyzer - Pro Lab</title>
    
    <!-- External Libraries (loaded via CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    
    <!-- Link to our Custom CSS file -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="flex flex-col h-screen">

    <!-- [COMP-HEADER] -->
    <header class="h-12 bg-slate-900 border-b border-slate-700 flex items-center px-4 justify-between shrink-0">
        <div class="flex items-center gap-3">
            <div class="w-4 h-4 bg-sky-500 rounded-sm shadow-[0_0_10px_rgba(14,165,233,0.6)]"></div>
            <h1 class="font-bold text-sm tracking-wide text-slate-200">VOICE<span class="text-sky-400">LAB</span></h1>
        </div>
    </header>

    <!-- [COMP-TOOLBAR] -->
    <div class="h-16 bg-slate-800 border-b border-slate-700 flex items-center px-4 gap-3 shrink-0 shadow-lg z-10 relative">
        
        <!-- RECORD BUTTON -->
        <button id="btn-record" class="shiny-btn flex items-center gap-2 px-5 py-2 border border-slate-600 rounded-md group text-slate-200 hover:text-white hover:border-slate-500">
            <div id="icon-record" class="w-3 h-3 rounded-full bg-red-500 shadow-sm transition-colors"></div>
            <span id="text-record" class="text-xs font-bold tracking-wide uppercase">Mic Rec</span>
        </button>

        <div class="w-px h-8 bg-slate-600 mx-1"></div>

        <!-- UPLOAD BUTTON -->
        <button id="btn-upload" class="shiny-btn flex items-center gap-2 px-5 py-2 border border-slate-600 rounded-md group text-slate-200 hover:text-white hover:border-slate-500">
            <span class="text-sky-400 text-lg">ðŸ“‚</span>
            <span class="text-xs font-bold tracking-wide uppercase">Load File</span>
        </button>
        <input type="file" id="file-input" class="hidden" accept=".mp3,.wav,.ogg">

        <!-- PLAY FILE BUTTON (Hidden initially) -->
        <button id="btn-play" class="hidden shiny-btn flex items-center gap-2 px-5 py-2 border border-green-600/50 rounded-md group text-slate-200 hover:text-white hover:border-green-400">
            <div id="icon-play" class="w-0 h-0 border-t-[5px] border-t-transparent border-l-[8px] border-l-green-400 border-b-[5px] border-b-transparent"></div>
            <span id="text-play" class="text-xs font-bold tracking-wide uppercase">Play</span>
        </button>

        <div class="w-px h-8 bg-slate-600 mx-1"></div>
        
        <!-- Status Display -->
        <div class="flex flex-col justify-center">
            <div class="flex items-center gap-2">
                <div class="text-[10px] text-slate-500 font-mono">STATUS:</div>
                <div id="status-indicator" class="text-xs font-mono text-sky-500 font-bold">READY</div>
            </div>
            <div id="file-info" class="text-[10px] text-slate-400 font-mono hidden">No file loaded</div>
        </div>
    </div>

    <!-- Main Workspace -->
    <div class="flex flex-grow overflow-hidden">

        <!-- [COMP-VIEWER] -->
        <main class="flex-grow relative bg-black flex flex-col">
            <div id="viewer-grid" class="viewer-grid w-full h-full">
                
                <!-- TOP: Waveform -->
                <div class="canvas-wrapper relative border-b border-slate-700">
                    <div class="absolute top-2 left-2 z-10 bg-black/60 backdrop-blur-sm px-2 py-0.5 rounded border border-white/10 text-[10px] text-sky-400 font-mono">OSCILLOGRAM</div>
                    <canvas id="waveform-canvas"></canvas>
                </div>

                <!-- BOTTOM: Spectrogram -->
                <div id="spectrogram-container" class="canvas-wrapper relative">
                    <div class="absolute top-2 left-2 z-10 bg-black/60 backdrop-blur-sm px-2 py-0.5 rounded border border-white/10 text-[10px] text-pink-400 font-mono" id="spectrogram-label">SPECTROGRAM</div>
                    
                    <div id="overlay-legend" class="absolute top-2 right-2 z-10 flex gap-2">
                        <span class="hidden text-[10px] bg-black/50 px-2 rounded text-yellow-400 font-mono" id="legend-pitch">Pitch</span>
                        <span class="hidden text-[10px] bg-black/50 px-2 rounded text-red-400 font-mono" id="legend-formants">Formants</span>
                    </div>

                    <canvas id="spectrogram-canvas"></canvas>
                </div>

            </div>
        </main>

        <!-- [COMP-INSPECTOR] -->
        <aside class="w-64 bg-slate-800 border-l border-slate-700 flex flex-col shrink-0 z-20 shadow-xl">
            <div class="p-3 border-b border-slate-700 bg-slate-800/50 backdrop-blur">
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider">Inspector</h3>
            </div>

            <div class="flex-grow overflow-y-auto p-4 space-y-6">
                
                <!-- Intensity Meter -->
                <div class="space-y-2">
                    <div class="flex justify-between items-baseline">
                        <label class="text-xs text-slate-400 font-semibold">Intensity</label>
                        <span id="val-intensity" class="data-value text-yellow-400 drop-shadow-sm">0.0 dB</span>
                    </div>
                    <div class="h-2 w-full bg-slate-900 rounded-full overflow-hidden border border-slate-700/50 shadow-inner">
                        <div id="bar-intensity" class="h-full bg-gradient-to-r from-green-500 via-yellow-400 to-red-500 w-0 transition-all duration-75"></div>
                    </div>
                </div>

                <!-- Pitch Meter -->
                <div class="space-y-2">
                    <div class="flex justify-between items-baseline">
                        <label class="text-xs text-slate-400 font-semibold">Pitch (F0)</label>
                        <span id="val-pitch" class="data-value text-sky-400 drop-shadow-sm">-- Hz</span>
                    </div>
                    <div class="p-2 rounded bg-slate-900/50 border border-slate-700/50">
                        <div class="text-[10px] text-slate-500 font-mono text-center">FUNDAMENTAL FREQUENCY</div>
                    </div>
                </div>

                <!-- Session Summary -->
                <div class="space-y-2">
                    <h4 class="text-[10px] font-bold text-slate-500 uppercase">Session Summary</h4>
                    <div class="summary-grid text-xs">
                        <div class="summary-item">
                            <div class="text-[9px] text-slate-500">MAX</div>
                            <div id="sum-max" class="font-mono text-sky-300">--</div>
                        </div>
                        <div class="summary-item">
                            <div class="text-[9px] text-slate-500">AVG</div>
                            <div id="sum-avg" class="font-mono text-white">--</div>
                        </div>
                        <div class="summary-item">
                            <div class="text-[9px] text-slate-500">MIN</div>
                            <div id="sum-min" class="font-mono text-sky-300">--</div>
                        </div>
                    </div>
                    <p class="text-[9px] text-slate-600 italic text-center pt-1">* Updates when recording stops</p>
                </div>

                <!-- Settings Toggles -->
                <div class="pt-4 border-t border-slate-700 space-y-3">
                    <h4 class="text-[10px] font-bold text-slate-500 uppercase">View Settings</h4>
                    
                    <label class="flex items-center gap-2 cursor-pointer hover:bg-slate-700/50 p-1.5 rounded transition-colors group">
                        <input type="checkbox" id="chk-spectrogram" checked class="accent-sky-500 w-3.5 h-3.5 rounded bg-slate-900 border-slate-600">
                        <span class="text-xs text-slate-300 group-hover:text-white">Show Spectrogram</span>
                    </label>
                    
                    <label class="flex items-center gap-2 cursor-pointer hover:bg-slate-700/50 p-1.5 rounded transition-colors group">
                        <input type="checkbox" id="chk-dark-mode" checked class="accent-sky-500 w-3.5 h-3.5 rounded bg-slate-900 border-slate-600">
                        <span class="text-xs text-slate-300 group-hover:text-white font-semibold text-sky-400">Dark Spectrogram</span>
                    </label>

                    <div class="h-px bg-slate-700 my-1"></div>

                    <label class="flex items-center gap-2 cursor-pointer hover:bg-slate-700/50 p-1.5 rounded transition-colors group">
                        <input type="checkbox" id="chk-pitch" class="accent-sky-500 w-3.5 h-3.5 rounded bg-slate-900 border-slate-600">
                        <span class="text-xs text-slate-300 group-hover:text-white">Show Pitch Contour</span>
                    </label>
                    <label class="flex items-center gap-2 cursor-pointer hover:bg-slate-700/50 p-1.5 rounded transition-colors group">
                        <input type="checkbox" id="chk-formants" class="accent-sky-500 w-3.5 h-3.5 rounded bg-slate-900 border-slate-600">
                        <span class="text-xs text-slate-300 group-hover:text-white">Show Formants</span>
                    </label>
                </div>
            </div>
        </aside>

    </div>

    <!-- Link to our Custom JavaScript file -->
    <script src="script.js"></script>
</body>
</html>